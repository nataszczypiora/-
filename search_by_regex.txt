Antipattern search_by_regex
| SELECT m.&quot;memberID&quot;, m.lastname FROM MEMBERS m WHERE NOT EXISTS (SELECT NULL FROM MEMBERS b WHERE b.lastname ~* '[a-zA-z]+([-][a-zA-Z]+)*' AND b.&quot;memberID&quot; = m.&quot;memberID&quot;);
| SELECT title FROM albums ORDER BY CASE WHEN title ~* '^The ' THEN substring(title from 5) WHEN title ~* '^An ' THEN substring(title from 4) WHEN title ~* '^A ' THEN substring(title from 3) ELSE title END asc;
| SELECT proname AS functionname, prosrc AS source FROM pg_proc WHERE prosrc ~* 'your_string';
| select 'alter table ' || quote_ident(nspname) || '.' || quote_ident(relname) || ' rename column ' || quote_ident(attname) || ' to ' || quote_ident('xxx') from pg_attribute join pg_class on pg_class.oid = pg_attribute.attrelid join pg_namespace on pg_namespace.oid = pg_class.relnamespace where atttypid = 'geometry'::regtype and (attname ~* 'geom') and not attisdropped and attnum &gt; 0 and pg_class.oid &gt;= 16384
| SELECT text FROM eightks WHERE other_events = true AND keywordregexs ~* '(\y(director | member \s+ |resigned)\y)';
| SELECT * FROM rates WHERE prefix = (SELECT max(prefix) FROM rates where '914428215151' ~* ('^'||prefix));
| select id, pattern from patterns where '/test-request' ~* pattern;
| SELECT rua FROM logradouros WHERE rua ~* 'Antonio De Sant\'Ana Galvao Av Frei (Av 01 Parte A)' LIMIT 100;
mysql&gt; show variables; +---------------------------------+-----------------------------+ | Variable_name | Value | +---------------------------------+-----------------------------+ | auto_increment_increment | 1 | | auto_increment_offset | 1 | | automatic_sp_privileges | ON | | back_log | 50 | | basedir | /usr/ | | binlog_cache_size | 32768 | | bulk_insert_buffer_size | 8388608 | | character_set_client | latin1 | | character_set_connection | latin1 | | character_set_database | utf8 | | character_set_filesystem | binary | | character_set_results | latin1 | | character_set_server | latin1 | | character_set_system | utf8 | | character_sets_dir | /usr/share/mysql/charsets/ | | collation_connection | latin1_swedish_ci | | collation_database | utf8_danish_ci | | collation_server | latin1_swedish_ci | | completion_type | 0 | | concurrent_insert | 1 | | connect_timeout | 10 | | datadir | /var/lib/mysql/ | | date_format | %Y-%m-%d | | datetime_format | %Y-%m-%d %H:%i:%s | | default_week_format | 0 | | delay_key_write | ON | | delayed_insert_limit | 100 | | delayed_insert_timeout | 300 | | delayed_queue_size | 1000 | | div_precision_increment | 4 | | keep_files_on_create | OFF | | engine_condition_pushdown | OFF | | expire_logs_days | 10 | | flush | OFF | | flush_time | 0 | | ft_boolean_syntax | + -&gt;&lt;()~*:""&amp;| | | ft_max_word_len | 84 | | ft_min_word_len | 4 | | ft_query_expansion_limit | 20 | | ft_stopword_file | (built-in) | | group_concat_max_len | 1024 | | have_archive | YES | | have_bdb | NO | | have_blackhole_engine | YES | | have_compress | YES | | have_crypt | YES | | have_csv | YES | | have_dynamic_loading | YES | | have_example_engine | NO | | have_federated_engine | DISABLED | | have_geometry | YES | | have_innodb | YES | | have_isam | NO | | have_merge_engine | YES | | have_ndbcluster | DISABLED | | have_openssl | DISABLED | | have_ssl | DISABLED | | have_query_cache | YES | | have_raid | NO | | have_rtree_keys | YES | | have_symlink | YES | | hostname | databaseserver | | init_connect | | | init_file | | | init_slave | | | innodb_additional_mem_pool_size | 8388608 | | innodb_autoextend_increment | 8 | | innodb_buffer_pool_awe_mem_mb | 0 | | innodb_buffer_pool_size | 1073741824 | | innodb_checksums | ON | | innodb_commit_concurrency | 0 | | innodb_concurrency_tickets | 500 | | innodb_data_file_path | ibdata1:10M:autoextend | | innodb_data_home_dir | | | innodb_adaptive_hash_index | ON | | innodb_doublewrite | ON | | innodb_fast_shutdown | 1 | | innodb_file_io_threads | 4 | | innodb_file_per_table | OFF | | innodb_flush_log_at_trx_commit | 2 | | innodb_flush_method | O_DIRECT | | innodb_force_recovery | 0 | | innodb_lock_wait_timeout | 50 | | innodb_locks_unsafe_for_binlog | OFF | | innodb_log_arch_dir | | | innodb_log_archive | OFF | | innodb_log_buffer_size | 4194304 | | innodb_log_file_size | 5242880 | | innodb_log_files_in_group | 2 | | innodb_log_group_home_dir | ./ | | innodb_max_dirty_pages_pct | 90 | | innodb_max_purge_lag | 0 | | innodb_mirrored_log_groups | 1 | | innodb_open_files | 300 | | innodb_rollback_on_timeout | OFF | | innodb_support_xa | ON | | innodb_sync_spin_loops | 20 | | innodb_table_locks | ON | | innodb_thread_concurrency | 8 | | innodb_thread_sleep_delay | 10000 | | interactive_timeout | 28800 | | join_buffer_size | 131072 | | key_buffer_size | 16777216 | | key_cache_age_threshold | 300 | | key_cache_block_size | 1024 | | key_cache_division_limit | 100 | | language | /usr/share/mysql/english/ | | large_files_support | ON | | large_page_size | 0 | | large_pages | OFF | | lc_time_names | en_US | | license | GPL | | local_infile | ON | | locked_in_memory | OFF | | log | OFF | | log_bin | OFF | | log_bin_trust_function_creators | OFF | | log_error | | | log_queries_not_using_indexes | OFF | | log_slave_updates | OFF | | log_slow_queries | ON | | log_warnings | 1 | | long_query_time | 1 | | low_priority_updates | OFF | | lower_case_file_system | OFF | | lower_case_table_names | 0 | | max_allowed_packet | 16777216 | | max_binlog_cache_size | 18446744073709547520 | | max_binlog_size | 104857600 | | max_connect_errors | 10 | | max_connections | 100 | | max_delayed_threads | 20 | | max_error_count | 64 | | max_heap_table_size | 16777216 | | max_insert_delayed_threads | 20 | | max_join_size | 18446744073709551615 | | max_length_for_sort_data | 1024 | | max_prepared_stmt_count | 16382 | | max_relay_log_size | 0 | | max_seeks_for_key | 18446744073709551615 | | max_sort_length | 1024 | | max_sp_recursion_depth | 0 | | max_tmp_tables | 32 | | max_user_connections | 0 | | max_write_lock_count | 18446744073709551615 | | multi_range_count | 256 | | myisam_data_pointer_size | 6 | | myisam_max_sort_file_size | 9223372036853727232 | | myisam_recover_options | BACKUP | | myisam_repair_threads | 1 | | myisam_sort_buffer_size | 8388608 | | myisam_stats_method | nulls_unequal | | ndb_autoincrement_prefetch_sz | 1 | | ndb_force_send | ON | | ndb_use_exact_count | ON | | ndb_use_transactions | ON | | ndb_cache_check_time | 0 | | ndb_connectstring | | | net_buffer_length | 16384 | | net_read_timeout | 30 | | net_retry_count | 10 | | net_write_timeout | 60 | | new | OFF | | old_passwords | OFF | | open_files_limit | 1024 | | optimizer_prune_level | 1 | | optimizer_search_depth | 62 | | pid_file | /var/run/mysqld/mysqld.pid | | plugin_dir | | | port | 3306 | | preload_buffer_size | 32768 | | profiling | OFF | | profiling_history_size | 15 | | protocol_version | 10 | | query_alloc_block_size | 8192 | | query_cache_limit | 1048576 | | query_cache_min_res_unit | 4096 | | query_cache_size | 16777216 | | query_cache_type | ON | | query_cache_wlock_invalidate | OFF | | query_prealloc_size | 8192 | | range_alloc_block_size | 4096 | | read_buffer_size | 131072 | | read_only | OFF | | read_rnd_buffer_size | 262144 | | relay_log | | | relay_log_index | | | relay_log_info_file | relay-log.info | | relay_log_purge | ON | | relay_log_space_limit | 0 | | rpl_recovery_rank | 0 | | secure_auth | OFF | | secure_file_priv | | | server_id | 0 | | skip_external_locking | ON | | skip_networking | OFF | | skip_show_database | OFF | | slave_compressed_protocol | OFF | | slave_load_tmpdir | /tmp/ | | slave_net_timeout | 3600 | | slave_skip_errors | OFF | | slave_transaction_retries | 10 | | slow_launch_time | 2 | | socket | /var/run/mysqld/mysqld.sock | | sort_buffer_size | 2097144 | | sql_big_selects | ON | | sql_mode | | | sql_notes | ON | | sql_warnings | OFF | | ssl_ca | | | ssl_capath | | | ssl_cert | | | ssl_cipher | | | ssl_key | | | storage_engine | MyISAM | | sync_binlog | 0 | | sync_frm | ON | | system_time_zone | CEST | | table_cache | 64 | | table_lock_wait_timeout | 50 | | table_type | MyISAM | | thread_cache_size | 8 | | thread_stack | 131072 | | time_format | %H:%i:%s | | time_zone | SYSTEM | | timed_mutexes | OFF | | tmp_table_size | 33554432 | | tmpdir | /tmp | | transaction_alloc_block_size | 8192 | | transaction_prealloc_size | 4096 | | tx_isolation | REPEATABLE-READ | | updatable_views_with_limit | YES | | version | 5.0.75-0ubuntu10.5-log | | version_comment | (Ubuntu) | | version_compile_machine | x86_64 | | version_compile_os | debian-linux-gnu | | wait_timeout | 28800 | +---------------------------------+-----------------------------+
| SELECT * FROM &lt;table&gt; WHERE &lt;colume&gt; ~* '\ychair\y'
| SELECT n.nspname, p.proname, pg_catalog.pg_get_function_arguments(p.oid) as params FROM pg_catalog.pg_proc p JOIN pg_catalog.pg_namespace n ON n.oid = p.pronamespace WHERE p.proname ~~* '%pgp_sym_encrypt%' AND pg_catalog.pg_function_is_visible(p.oid);
| select variable1, variable2 from table1 where email ~* 'link1.com$' and not email ~* 'link2.com$';
| select column where column ~* '[\u0001-\u0031]'
| SELECT * FROM documents WHERE title ~* 'incredible document'
| select * from some_table where some_column ~* '^(.)DEF(\1)$'
| SELECT to_timestamp(extrainfo.startdate/1000) ,messages.timestamp ,users.username ,substring(messages.content from E'(?i)phrase number one|phrase\.two|another phrase|this list keeps going|lots\.of\*keyword phrases|more will be added in the future') ,messages.content FROM users LEFT JOIN messages ON messages.senderid = users.id LEFT JOIN extrainfo ON extrainfo.username = users.username WHERE extrainfo.type1 = 't' AND messages.content ~* E'phrase number one|phrase\.two|another phrase|this list keeps going|lots\.of\*keyword phrases|more will be added in the future' AND (extrainfo.type2 = 'f' OR extrainfo.type2 IS NULL)
| Select * from table where column ~* 'UnEvEn TeXt'; Select * from table where column ~ 'Uneven text';
| select * from table_name where column ~* '\yAB\y';
| select * from table where field ~* 'sometext';
| SELECT name FROM clients WHERE name ~* 'help center test \\[.*?\\]'
| SELECT * FROM some_hstore WHERE EXISTS( SELECT 1 FROM skeys(blah) AS k WHERE k ~* 'a%');
| SELECT to_timestamp(extrainfo.startdate/1000) ,messages.timestamp ,users.username ,substring(messages.content from rgxp.rgxp ) ,messages.content FROM users LEFT JOIN messages ON messages.senderid = users.id join ( select E'(?i)phrase number one|phrase\.two|another phrase|this list keeps going|lots\.of\*keyword phrases|more will be added in the future'::text as rgxp ) rgxp on messages.content ~* rgxp.rgxp LEFT JOIN extrainfo ON extrainfo.username = users.username WHERE extrainfo.type1 = 't' AND (extrainfo.type2 = 'f' OR extrainfo.type2 IS NULL)
? CREATE FUNCTION backward_texticlike(text, text) RETURNS booleans STRICT IMMUTABLE LANGUAGE SQL AS $$ SELECT texticlike($2, $1) $$; CREATE OPERATOR !!!~~* ( PROCEDURE = backward_texticlike, LEFTARG = text, RIGHTARG = text, COMMUTATOR = ~~* );
| SELECT * FROM descriptions as d WHERE d.category_id = ? AND d.description != '' AND regexp_replace(d.description, '(...)', '') !~* '...' AND regexp_replace(d.description, '...', '') !~* '...' AND d.id != ? ORDER BY ts_rank_cd(to_tsvector('english', name), plainto_tsquery('english', 'my search words')) DESC LIMIT 5 OFFSET 0';
| select people.id, lower(lastname) as lname from people where (interests ~* '$key' or biography ~* '$key' or exists (select * from authors, articles where articles.keywords ~* '$key' and articles.id=authors.article_id and authors.author_id=people.id)) and not inactive and email is not null and people.id not in ( select people.id from people, authors where authors.author_id = people.id and authors.article_id = $article_id) and people.id not in ( select people.id from articles, referees where &lt;---- **FROM clause is missing here** people.id = referee_id and refused is null and reported is null and editors_decision is null and article_id = articles.id) and people.id not in ( select people.id from referees where people.id = referee.id and reported is not null and date_trunc('day', current_timestamp - cast(reported as timestamp)) &gt; 30)
| create function good_description(text) returns boolean as $$ select regexp_replace($1, '(...)', '') !~* '...' and regexp_replace($1, '...', '') !~* '...' $$ language sql immutable strict;
| SELECT "name" FROM "deals" WHERE ("name" ~* E'^Untitled Deal \\d+$');
| SELECT '^p' ~* ANY(authors) FROM book;
| select * from table where value ~* 'foo|bar|baz';
| SELECT id FROM groups where name ~* 'administrator'

Statystyka ---
Poprawnie zklasyfikowanych: 28
Nie poprawnie zklasyfikowanych: 2
Procent poprawnych: 93%